{"ast":null,"code":"var _jsxFileName = \"/workspace/changwoo/React/src/components/ChatWindow.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport Message from './Message';\nimport InputBox from './InputBox';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatWindow = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [showInitialMessage, setShowInitialMessage] = useState(true); // 초기 메시지 상태 관리\n  const messagesEndRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const handleSend = async message => {\n    if (showInitialMessage) {\n      setShowInitialMessage(false); // 첫 메시지를 보낼 때 초기 메시지를 숨김\n    }\n    const userMessage = {\n      sender: 'user',\n      text: message\n    };\n    setMessages([...messages, userMessage]);\n    try {\n      const response = await fetch('http://localhost:8000/api/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message\n        })\n      });\n      const data = await response.json();\n      const botMessage = {\n        sender: 'bot',\n        text: data.reply\n      };\n      setMessages(prevMessages => [...prevMessages, botMessage]);\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-window\",\n    children: [showInitialMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"initial-message\",\n      children: \"\\uC548\\uB155\\uD558\\uC138\\uC694, \\uBB34\\uC5C7\\uC744 \\uB3C4\\uC640\\uB4DC\\uB9B4\\uAE4C\\uC694?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(Message, {\n        sender: msg.sender,\n        text: msg.text\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InputBox, {\n      onSend: handleSend\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"dN5GAXz6qq1rhZTgtSEk9sNMCa4=\");\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Message","InputBox","jsxDEV","_jsxDEV","ChatWindow","_s","messages","setMessages","showInitialMessage","setShowInitialMessage","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSend","message","userMessage","sender","text","response","fetch","method","headers","body","JSON","stringify","data","json","botMessage","reply","prevMessages","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","index","ref","onSend","_c","$RefreshReg$"],"sources":["/workspace/changwoo/React/src/components/ChatWindow.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Message from './Message';\nimport InputBox from './InputBox';\n\nconst ChatWindow = () => {\n  const [messages, setMessages] = useState([]);\n  const [showInitialMessage, setShowInitialMessage] = useState(true); // 초기 메시지 상태 관리\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSend = async (message) => {\n    if (showInitialMessage) {\n      setShowInitialMessage(false); // 첫 메시지를 보낼 때 초기 메시지를 숨김\n    }\n\n    const userMessage = { sender: 'user', text: message };\n    setMessages([...messages, userMessage]);\n\n    try {\n      const response = await fetch('http://localhost:8000/api/chat', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ message }),\n      });\n\n      const data = await response.json();\n      const botMessage = { sender: 'bot', text: data.reply };\n      setMessages((prevMessages) => [...prevMessages, botMessage]);\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n\n  return (\n    <div className=\"chat-window\">\n      {showInitialMessage && (\n        <div className=\"initial-message\">\n          안녕하세요, 무엇을 도와드릴까요?\n        </div>\n      )}\n      <div className=\"messages-container\">\n        {messages.map((msg, index) => (\n          <Message key={index} sender={msg.sender} text={msg.text} />\n        ))}\n        <div ref={messagesEndRef} />\n      </div>\n      <InputBox onSend={handleSend} />\n    </div>\n  );\n};\n\nexport default ChatWindow;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}